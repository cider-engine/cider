<Project>

	<ItemGroup Condition="$(CiderTest)">
		<ProjectReference Include="$(MSBuildThisFileDirectory)..\..\Cider\Cider.csproj" />
		<ProjectReference Include="$(MSBuildThisFileDirectory)..\..\Cider.Generator\Cider.Generator.csproj" OutputItemType="Analyzer" ReferenceOutputAssembly="false" />
	</ItemGroup>

	<ItemGroup Condition="!$(CiderTest)">
		<PackageReference Include="Cider" Version="$(CiderVersion)" />
		<PackageReference Include="Cider.Generator" Version="$(CiderVersion)" />
	</ItemGroup>

	<ItemGroup>
		<CiderAssets Include="$(CiderAssetsPath)\**\*" />

		<CiderAssetsWithoutMeta Include="@(CiderAssets)" />
		<CiderAssetsWithoutMeta Remove="**\*.meta" />

		<None Include="@(CiderAssetsWithoutMeta)" CopyToOutputDirectory="PreserveNewest" />
		
		<CompilerVisibleProperty Include="MSBuildProjectDirectory" />

		<AdditionalFiles Include="**\*.cider" />
		<AdditionalFiles Include="**\*.meta" />
		
		
	</ItemGroup>

	<!--Android-->
	<ItemGroup Condition="$(TargetFramework.Contains('android'))">
		<AndroidAsset Include="@(CiderAssetsWithoutMeta)" />
		<AndroidAsset Remove="**\*.meta" />
		<AndroidAsset Remove="**\*.cider" />
	</ItemGroup>
	
	
	<UsingTask Condition="$(CiderTest)" TaskName="AssetTask" AssemblyFile="$(MSBuildThisFileDirectory)..\..\Cider.Task\bin\$(Configuration)\netstandard2.0\Cider.Task.dll" />
	<UsingTask Condition="!$(CiderTest)" TaskName="AssetTask" AssemblyFile="$(MSBuildThisFileDirectory)..\tasks\Cider.Task.dll" />

	<Target Name="AssetMetaPreprocess" BeforeTargets="BeforeBuild">
		<AssetTask Assets="@(CiderAssets)" />
	</Target>

	<Import Project="Sdk.targets" Sdk="Microsoft.NET.Sdk" />
</Project>